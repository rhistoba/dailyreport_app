<% provide(:title, @report.title) %>
<% provide(:button_text, t('button.comment'))%>
<div class="col-md-10 col-md-offset-1">
  <h3><%= t('headline.report.show.this') %></h3>
  <table class="table">
    <tbody>
    <tr>
      <th width="120"><%= t('activerecord.attributes.report.title') %></th>
      <td><%= @report.title %></td>
    </tr>
    <tr>
      <th><%= t('activerecord.attributes.user.name') %></th>
      <td><%= @report.user.name %></td>
    </tr>
    <tr>
      <th><%= t('activerecord.attributes.report.date') %></th>
      <td><%= @report.date %></td>
    </tr>
    <tr>
      <th><%= t('activerecord.attributes.report.content') %></th>
      <td><%= @report.content %></td>
    </tr>
    </tbody>
  </table>

  <% if @report.user == current_user %>
      <p><%= link_to t('link_text.edit'), edit_report_path %>
      | <%= link_to t('link_text.delete'), report_path, method: :delete,
                     data: { confirm: t('confirm.delete') } %></p>
  <% end %>

  <h3><%= t('headline.report.show.comments') %></h3>
  <table class="table">
    <tbody>
    <% @comments.each do |comment| %>
    <tr>
      <td width="120"><%= comment.user.name %></td>
      <td><%= comment.content %></td>
      <td width="150"><%= time_ago_in_words(comment.created_at) + t('datetime.ago') %></td>
      <% if current_user?(comment.user) %>
          <td width="50"><%= link_to t('link_text.delete'), [@report, comment], method: :delete,
                          data: { confirm: t('confirm.delete') } %></td>
      <% else %>
          <td width="50"></td>
      <% end %>
    </tr>
    <% end %>
    </tbody>
  </table>

  <section class="comment_form">
    <%= render 'shared/comment_form' %>
  </section>
</div>
